"use strict";(()=>{var e={};e.id=555,e.ids=[555,888,660],e.modules={3334:(e,t,r)=>{r.r(t),r.d(t,{config:()=>S,default:()=>g,getServerSideProps:()=>b,getStaticPaths:()=>y,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>T,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>m});var s={};r.r(s),r.d(s,{default:()=>BottlePage});var i=r(7093),l=r(5244),n=r(1323),o=r(4003),a=r(1337),c=r.n(a),d=r(997),x=r(6689),p=r(1163);function BottlePage(){let e=(0,p.useRouter)(),{id:t}=e.query,[r,s]=(0,x.useState)(null),[i,l]=(0,x.useState)(!0);if((0,x.useEffect)(()=>{t&&scanBottle();async function scanBottle(){let e=await fetch(`/api/scanBottle?bottleId=${t}`),r=await e.json();s(r),l(!1)}},[t]),i)return d.jsx("div",{style:u.loading,children:d.jsx("h2",{style:{color:"white"},children:"Scanning bottle..."})});if(r.error)return(0,d.jsxs)("div",{style:u.page,children:[d.jsx("h1",{style:u.title,children:"LE SAINT"}),d.jsx("p",{style:u.error,children:r.error})]});let{bottle:n,user:o,awarded:a,alreadyScanned:c}=r;return(0,d.jsxs)("div",{style:u.page,children:[d.jsx("h1",{style:u.title,children:"LE SAINT"}),(0,d.jsxs)("h2",{style:u.bottleNumber,children:["Bottle N\xba ",t]}),(0,d.jsxs)("div",{style:u.section,children:[d.jsx("h3",{style:u.sectionTitle,children:"Your Bottle Song"}),d.jsx("a",{style:u.songLink,href:n.songURL,target:"_blank",children:"Play on Spotify →"})]}),(0,d.jsxs)("div",{style:u.section,children:[d.jsx("h3",{style:u.sectionTitle,children:"Bottle Legacy"}),(0,d.jsxs)("p",{style:u.legacyText,children:["Discovered by ",n.totalScans," Saints before"]})]}),(0,d.jsxs)("div",{style:u.section,children:[d.jsx("h3",{style:u.sectionTitle,children:"Your Reward"}),c?d.jsx("p",{style:u.infoText,children:"You have already scanned this bottle."}):(0,d.jsxs)("p",{style:u.rewardText,children:["✨ +",a," Saint Point awarded"]})]}),(0,d.jsxs)("div",{style:u.section,children:[d.jsx("h3",{style:u.sectionTitle,children:"Your Status"}),(0,d.jsxs)("p",{style:u.infoText,children:[o.level," \xb7 ",o.points," points"]})]}),(0,d.jsxs)("div",{style:u.section,children:[d.jsx("h3",{style:u.sectionTitle,children:"FLY HIGH CLUB"}),d.jsx("p",{style:u.subtleText,children:"Unlock exclusive benefits at 100 points."})]})]})}let u={page:{minHeight:"100vh",backgroundColor:"black",color:"white",padding:"40px 24px",fontFamily:"Inter, sans-serif"},loading:{minHeight:"100vh",background:"black",display:"flex",justifyContent:"center",alignItems:"center"},title:{textAlign:"center",fontFamily:"Playfair Display",fontSize:"32px",letterSpacing:"2px",marginBottom:"40px"},bottleNumber:{textAlign:"center",fontSize:"22px",marginBottom:"32px"},section:{marginBottom:"32px"},sectionTitle:{fontFamily:"Playfair Display",fontSize:"18px",marginBottom:"8px"},songLink:{color:"#FF1BAA",textDecoration:"underline",fontSize:"16px"},legacyText:{color:"rgba(255,255,255,0.8)"},rewardText:{color:"#FF1BAA",fontSize:"18px"},infoText:{color:"white"},subtleText:{color:"rgba(255,255,255,0.6)"},error:{color:"red",marginTop:"20px"}},g=(0,n.l)(s,"default"),h=(0,n.l)(s,"getStaticProps"),y=(0,n.l)(s,"getStaticPaths"),b=(0,n.l)(s,"getServerSideProps"),S=(0,n.l)(s,"config"),f=(0,n.l)(s,"reportWebVitals"),m=(0,n.l)(s,"unstable_getStaticProps"),j=(0,n.l)(s,"unstable_getStaticPaths"),v=(0,n.l)(s,"unstable_getStaticParams"),P=(0,n.l)(s,"unstable_getServerProps"),_=(0,n.l)(s,"unstable_getServerSideProps"),T=new i.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/bottle/[id]",pathname:"/bottle/[id]",bundlePath:"",filename:""},components:{App:c(),Document:o.default},userland:s})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[514,859,337,450,792,163,3],()=>__webpack_exec__(3334));module.exports=r})();